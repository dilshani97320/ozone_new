<div class="container-md background" style="margin-top: -25px" *ngIf="!progress; else progressBlock">

  <div *ngIf="!error">

    <div class="row mt-4 pt-4" style="background-color: rgba(255, 255, 255, 0.5)">

      <div class="col-sm d-flex justify-content-center">
        <img class="rounded-circle img-thumbnail" style="max-width: 300px; width: 100%" [src]="profilePicture" alt="Profile Picture" />
      </div>

      <div class="col-8">
        <div class="mt-5">
          <p class="h4 m-0"><strong>{{ userDetails.fullName }}</strong></p>
          <table>
            <tr>
              <td style="text-align: center; width: 40px"><i class="fa fa-envelope" aria-hidden="true"></i></td>
              <td style="font-weight: 550">{{ userDetails.email }}</td>
            </tr>
            <tr *ngIf="getRole === 'Admin' || getRole === 'Teacher'">
              <td style="text-align: center"><i class="fa fa-briefcase" aria-hidden="true"></i></td>
              <td style="font-weight: 550">{{ userDetails.designation }}</td>
            </tr>
            <tr *ngIf="userDetails.address">
              <td style="text-align: center"><i class="fa fa-map-marker" aria-hidden="true"></i></td>
              <td style="font-weight: 550">{{ userDetails.address }}</td>
            </tr>
            <tr *ngIf="userDetails.courseName">
              <td style="text-align: center"><i class="fa fa-graduation-cap" aria-hidden="true"></i></td>
              <td style="font-weight: 550">{{ userDetails.courseName }}</td>
            </tr>
          </table>
        </div>
      </div>

    </div>

    <div class="row d-flex justify-content-end mx-1 mb-2" *ngIf="!studentID">
      <button class="btn btn-transparent" style="font-weight: 550" [routerLink]="'./../edit-profile'">
        <i class="fa fa-edit"></i> Edit Profile
      </button>
    </div>

    <div>

      <mat-card class="px-0 pb-0 mb-3">

        <mat-card-header>
          <mat-card-title>
            Personal Details
          </mat-card-title>
        </mat-card-header>

        <mat-card-content>
          <ul class="list-group">
            <li class="list-group-item list-group-item-action d-flex justify-content-start">
              <div class="w-25">FULL NAME</div>
              <div><span style="font-weight: 550">{{ userDetails.fullName }}</span></div>
            </li>
            <li class="list-group-item list-group-item-action d-flex justify-content-start">
              <div class="w-25">CONTACT</div>
              <div>
                <span *ngIf="userDetails.email">Email: <span style="font-weight: 550">{{ userDetails.email }}</span><br /></span>
                <span *ngIf="userDetails.recoveryEmail">Recovery Email: <span style="font-weight: 550">{{ userDetails.recoveryEmail }}</span><br /></span>
                <span *ngIf="userDetails.address">Address: <span style="font-weight: 550">{{ userDetails.address }}<br /></span></span>
                <span *ngIf="userDetails.home">Home: <span style="font-weight: 550">{{ userDetails.home }}</span><br /></span>
                <span *ngIf="userDetails.mobile">Mobile: <span style="font-weight: 550">{{ userDetails.mobile }}</span></span>
              </div>
            </li>
            <li *ngIf="userDetails.dateOfBirth" class="list-group-item list-group-item-action d-flex justify-content-start">
              <div class="w-25">DATE OF BIRTH</div>
              <div><span style="font-weight: 550">{{ userDetails.dateOfBirth | date: 'MMM d, y'}}</span></div>
            </li>
            <li *ngIf="userDetails.dateOfBirth" class="list-group-item list-group-item-action d-flex justify-content-start">
              <div class="w-25">NIC</div>
              <div><span style="font-weight: 550">{{ userDetails.nic }}</span></div>
            </li>
            <li class="list-group-item list-group-item-action d-flex justify-content-start">
              <div class="w-25">DESIGNATION</div>
              <div><span style="font-weight: 550">{{ userDetails.designation }}</span></div>
            </li>
            <li *ngIf="userDetails.company" class="list-group-item list-group-item-action d-flex justify-content-start">
              <div class="w-25">COMPANY</div>
              <div><span style="font-weight: 550">{{ userDetails.company }}</span></div>
            </li>
          </ul>
        </mat-card-content>

      </mat-card>

      <mat-card class="px-0 pb-0 mb-3" *ngIf="userDetails.educationQualification && userDetails.educationQualification.length > 0">

        <mat-card-header>
          <mat-card-title>Education</mat-card-title>
        </mat-card-header>

        <mat-card-content>
          <mat-list class="list-group">
            <mat-list-item class="list-group-item list-group-item-action" *ngFor="let education of userDetails.educationQualification">
              <mat-icon mat-list-icon>school</mat-icon>
              <div mat-line><span style="font-weight: 550">{{ education.institute }}</span></div>
              <div mat-line><span class="text-secondary">{{ education.degree }}</span></div>
              <div mat-line><span class="text-secondary">Completed on: {{ education.dateCompleted | date: 'MMM d, y'}} ({{ education.class }})</span></div>
            </mat-list-item>
          </mat-list>
        </mat-card-content>

      </mat-card>

      <mat-card class="px-0 pb-0 mb-3" *ngIf="getRole === 'Student' || studentID">

        <mat-card-header>
          <mat-card-title>
            Course Details
          </mat-card-title>
        </mat-card-header>

        <mat-card-content>

          <ul class="list-group">
            <li class="list-group-item list-group-item-action d-flex justify-content-start">
              <div class="w-25">COURSE</div>
              <div><span style="font-weight: 550">{{ userDetails.courseName }}</span></div>
            </li>
            <li class="list-group-item list-group-item-action d-flex justify-content-start">
              <div class="w-25">ACADEMIC YEAR</div>
              <div><span style="font-weight: 550">{{ userDetails.academicYear }}</span></div>
            </li>
            <li class="list-group-item list-group-item-action d-flex justify-content-start">
              <div class="w-25">CURRENT GPA</div>
              <div><span style="font-weight: 550">{{ userDetails.currentGPA }}</span></div>
            </li>
          </ul>

        </mat-card-content>

      </mat-card>

      <mat-card class="px-0 pb-0">

        <mat-card-header>
          <mat-card-title>
            Account Details
          </mat-card-title>
        </mat-card-header>

        <mat-card-content>
          <ul class="list-group">
            <li class="list-group-item list-group-item-action d-flex justify-content-start">
              <div class="w-25">ACCOUNT TYPE</div>
              <div style="font-weight: 550">{{ userDetails.roleName }}</div>
            </li>
            <li class="list-group-item list-group-item-action d-flex justify-content-start">
              <div class="w-25">USERNAME</div>
              <div><b style="font-weight: 550">{{ userDetails.username | uppercase }}</b></div>
            </li>
            <li class="list-group-item list-group-item-action d-flex justify-content-start">
              <div class="w-25">RECOVERY EMAIL</div>
              <div><b style="font-weight: 550">{{ userDetails.recoveryEmail }}</b></div>
            </li>
          </ul>
        </mat-card-content>

      </mat-card>

      <br/>

    </div>

  </div>

</div>

<ng-template #progressBlock>
  <div class="row d-flex justify-content-center my-5">
    <mat-spinner></mat-spinner>
  </div>
</ng-template>

<div class="alert alert-danger mx-2 mt-5" *ngIf="error">{{ error }}</div>
